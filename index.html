<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posture Checker</title>
    <link rel="stylesheet" href="style.css">
    <!-- TensorFlow.js and Teachable Machine Pose -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8/dist/teachablemachine-pose.min.js"></script>
</head>
<body>
    <!-- Background Elements -->
    <div class="background-elements">
        <div class="floating-orbs">
            <div class="orb orb-1"></div>
            <div class="orb orb-2"></div>
            <div class="orb orb-3"></div>
            <div class="orb orb-4"></div>
            <div class="orb orb-5"></div>
        </div>
        
        <div class="neural-network">
            <div class="neural-node node-1"></div>
            <div class="neural-node node-2"></div>
            <div class="neural-node node-3"></div>
            <div class="neural-node node-4"></div>
            <div class="neural-node node-5"></div>
            <div class="neural-node node-6"></div>
            <svg class="neural-connections" width="100%" height="100%">
                <line x1="15%" y1="20%" x2="85%" y2="80%" stroke="url(#connectionGradient)" stroke-width="1" opacity="0.3"/>
                <line x1="25%" y1="70%" x2="75%" y2="30%" stroke="url(#connectionGradient)" stroke-width="1" opacity="0.2"/>
                <line x1="10%" y1="50%" x2="60%" y2="20%" stroke="url(#connectionGradient)" stroke-width="1" opacity="0.25"/>
                <line x1="40%" y1="80%" x2="90%" y2="40%" stroke="url(#connectionGradient)" stroke-width="1" opacity="0.2"/>
                <line x1="20%" y1="30%" x2="80%" y2="60%" stroke="url(#connectionGradient)" stroke-width="1" opacity="0.3"/>
                <defs>
                    <linearGradient id="connectionGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#00f5ff" stop-opacity="0.6"/>
                        <stop offset="50%" style="stop-color:#ff00ff" stop-opacity="0.4"/>
                        <stop offset="100%" style="stop-color:#00ff7f" stop-opacity="0.6"/>
                    </linearGradient>
                </defs>
            </svg>
        </div>
        
        <div class="tech-grid">
            <div class="grid-line grid-horizontal-1"></div>
            <div class="grid-line grid-horizontal-2"></div>
            <div class="grid-line grid-vertical-1"></div>
            <div class="grid-line grid-vertical-2"></div>
        </div>
        
        <div class="data-streams">
            <div class="stream stream-1">
                <div class="data-particle"></div>
                <div class="data-particle"></div>
                <div class="data-particle"></div>
            </div>
            <div class="stream stream-2">
                <div class="data-particle"></div>
                <div class="data-particle"></div>
            </div>
        </div>
        
        <div class="corner-elements">
            <div class="corner corner-top-left">
                <div class="corner-line corner-line-h"></div>
                <div class="corner-line corner-line-v"></div>
            </div>
            <div class="corner corner-top-right">
                <div class="corner-line corner-line-h"></div>
                <div class="corner-line corner-line-v"></div>
            </div>
            <div class="corner corner-bottom-left">
                <div class="corner-line corner-line-h"></div>
                <div class="corner-line corner-line-v"></div>
            </div>
            <div class="corner corner-bottom-right">
                <div class="corner-line corner-line-h"></div>
                <div class="corner-line corner-line-v"></div>
            </div>
        </div>
        
        <div class="scanning-lines">
            <div class="scan-line scan-1"></div>
            <div class="scan-line scan-2"></div>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <div class="login-logo">
                    <svg width="64" height="64" viewBox="0 0 56 56" fill="none">
                        <circle cx="28" cy="28" r="22" stroke="url(#loginGradient)" stroke-width="2.5" fill="none"/>
                        <path d="M28 12 L28 44" stroke="url(#loginSpineGradient)" stroke-width="3" stroke-linecap="round"/>
                        <circle cx="28" cy="15" r="2.5" fill="url(#loginGradient)"/>
                        <circle cx="28" cy="20" r="2" fill="url(#loginGradient)" opacity="0.9"/>
                        <circle cx="28" cy="25" r="2" fill="url(#loginGradient)" opacity="0.8"/>
                        <circle cx="28" cy="31" r="2" fill="url(#loginGradient)" opacity="0.8"/>
                        <circle cx="28" cy="36" r="2" fill="url(#loginGradient)" opacity="0.9"/>
                        <circle cx="28" cy="41" r="2.5" fill="url(#loginGradient)"/>
                        <circle cx="28" cy="11" r="4" fill="url(#loginHeadGradient)"/>
                        <path d="M18 18 L28 15 L38 18" stroke="url(#loginGradient)" stroke-width="2.5" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="loginGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00f5ff"/>
                                <stop offset="100%" style="stop-color:#ff00ff"/>
                            </linearGradient>
                            <linearGradient id="loginSpineGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#00ff7f"/>
                                <stop offset="50%" style="stop-color:#00f5ff"/>
                                <stop offset="100%" style="stop-color:#00ff7f"/>
                            </linearGradient>
                            <linearGradient id="loginHeadGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ff00ff"/>
                                <stop offset="100%" style="stop-color:#00f5ff"/>
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <h1>Perfect Posture</h1>
                <p>Track your posture journey</p>
            </div>

            <div class="auth-forms">
                <!-- Login Form -->
                <div id="login-form" class="auth-form active">
                    <h2>Welcome Back</h2>
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password" required>
                    </div>
                    <button type="button" id="login-btn" class="auth-btn btn-primary">Sign In</button>
                    <p class="auth-switch">Don't have an account? <span id="show-register">Sign up</span></p>
                </div>

                <!-- Register Form -->
                <div id="register-form" class="auth-form">
                    <h2>Create Account</h2>
                    <div class="form-group">
                        <label for="register-name">Full Name</label>
                        <input type="text" id="register-name" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="register-email">Email</label>
                        <input type="email" id="register-email" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <input type="password" id="register-password" placeholder="Create a password" required>
                    </div>
                    <button type="button" id="register-btn" class="auth-btn btn-primary">Create Account</button>
                    <p class="auth-switch">Already have an account? <span id="show-login">Sign in</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="main-app" class="container hidden">
        <!-- User Dashboard Button -->
        <div class="user-controls">
            <button id="dashboard-btn" class="dashboard-btn">
                📊 Dashboard
            </button>
            <button id="logout-btn" class="logout-btn">
                🚪 Logout
            </button>
        </div>

        <header>
            <div class="logo-container">
                <div class="logo">
                    <div class="logo-icon">
                        <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                            <!-- Outer tech ring -->
                            <circle cx="28" cy="28" r="26" stroke="url(#techGradient)" stroke-width="2" fill="none" opacity="0.6"/>
                            <circle cx="28" cy="28" r="22" stroke="url(#primaryGradient)" stroke-width="2.5" fill="none"/>
                            
                            <!-- Spine representation -->
                            <path d="M28 12 L28 44" stroke="url(#spineGradient)" stroke-width="3" stroke-linecap="round"/>
                            
                            <!-- Vertebrae points -->
                            <circle cx="28" cy="15" r="2.5" fill="url(#primaryGradient)"/>
                            <circle cx="28" cy="20" r="2" fill="url(#primaryGradient)" opacity="0.9"/>
                            <circle cx="28" cy="25" r="2" fill="url(#primaryGradient)" opacity="0.8"/>
                            <circle cx="28" cy="31" r="2" fill="url(#primaryGradient)" opacity="0.8"/>
                            <circle cx="28" cy="36" r="2" fill="url(#primaryGradient)" opacity="0.9"/>
                            <circle cx="28" cy="41" r="2.5" fill="url(#primaryGradient)"/>
                            
                            <!-- Head -->
                            <circle cx="28" cy="11" r="4" fill="url(#headGradient)"/>
                            
                            <!-- Shoulders -->
                            <path d="M18 18 L28 15 L38 18" stroke="url(#primaryGradient)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                            
                            <!-- Tech elements -->
                            <circle cx="42" cy="14" r="1.5" fill="url(#accentGradient)" opacity="0.8"/>
                            <circle cx="14" cy="42" r="1.5" fill="url(#accentGradient)" opacity="0.8"/>
                            <circle cx="42" cy="42" r="1" fill="url(#accentGradient)" opacity="0.6"/>
                            <circle cx="14" cy="14" r="1" fill="url(#accentGradient)" opacity="0.6"/>
                            
                            <defs>
                                <linearGradient id="primaryGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#00f5ff"/>
                                    <stop offset="50%" style="stop-color:#0099ff"/>
                                    <stop offset="100%" style="stop-color:#ff00ff"/>
                                </linearGradient>
                                <linearGradient id="spineGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#00ff7f"/>
                                    <stop offset="50%" style="stop-color:#00f5ff"/>
                                    <stop offset="100%" style="stop-color:#00ff7f"/>
                                </linearGradient>
                                <linearGradient id="headGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#ff00ff"/>
                                    <stop offset="100%" style="stop-color:#00f5ff"/>
                                </linearGradient>
                                <linearGradient id="techGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#00f5ff" stop-opacity="0.3"/>
                                    <stop offset="100%" style="stop-color:#ff00ff" stop-opacity="0.3"/>
                                </linearGradient>
                                <linearGradient id="accentGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#00ff7f"/>
                                    <stop offset="100%" style="stop-color:#00f5ff"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <h1>Perfect Posture</h1>
                        <span class="logo-tagline">Neural Posture Detection</span>
                    </div>
                </div>
            </div>
            <p>Advanced real-time posture monitoring with machine learning</p>
        </header>

        <main>
            <div class="webcam-container">
                <video id="webcam" autoplay muted playsinline></video>
                <canvas id="pose-canvas"></canvas>
                <div class="webcam-overlay">
                    <div class="status-indicator" id="status-indicator">
                        <span class="status-text">Initializing...</span>
                    </div>
                    <div class="confidence-circle" id="confidence-circle">
                        <div class="confidence-progress">
                            <svg class="confidence-ring" width="120" height="120">
                                <circle cx="60" cy="60" r="50" stroke="rgba(255,255,255,0.1)" stroke-width="8" fill="none"></circle>
                                <circle id="confidence-progress-ring" cx="60" cy="60" r="50" stroke="#00f5ff" stroke-width="8" fill="none" 
                                        stroke-dasharray="314" stroke-dashoffset="314" transform="rotate(-90 60 60)"></circle>
                            </svg>
                            <div class="confidence-text-overlay">
                                <span class="confidence-percentage" id="confidence-percentage">0%</span>
                                <span class="confidence-label">Confidence</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                    <div class="results-container">
            <div class="session-timer-card">
                <h3>Session Time</h3>
                <div class="timer-display" id="session-timer">
                    <span class="timer-text">00:00</span>
                </div>
            </div>

            <div class="prediction-card">
                <h3>Current Posture</h3>
                <div class="prediction-label" id="prediction-label">
                    <span class="label-text">Loading...</span>
                </div>
            </div>

            <div class="feedback-card">
                <h3>Feedback</h3>
                <div class="feedback-text" id="feedback-text">
                    <span>Initializing camera and model...</span>
                </div>
            </div>

                <div class="accuracy-metrics">
                    <div class="metric-card">
                        <h4>Pose Quality</h4>
                        <div class="metric-value" id="pose-quality">--</div>
                    </div>
                    <div class="metric-card">
                        <h4>Consistency</h4>
                        <div class="metric-value" id="consistency-score">--</div>
                    </div>
                    <div class="metric-card">
                        <h4>Threshold</h4>
                        <div class="metric-value" id="adaptive-threshold">--</div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="controls">
                <button id="start-btn" class="btn btn-primary">Start Camera</button>
                <button id="stop-btn" class="btn btn-secondary" disabled>Stop Camera</button>
            </div>
            <div class="settings">
                <label class="notification-toggle">
                    <input type="checkbox" id="notifications-enabled" checked>
                    <span class="toggle-label">Enable Notifications</span>
                </label>
                <button id="test-notification-btn" class="btn btn-test">Test Notification</button>
            </div>
        </footer>
    </div>

    <!-- Dashboard Modal -->
    <div id="dashboard-modal" class="dashboard-modal hidden">
        <div class="dashboard-content">
            <div class="dashboard-header">
                <h2>📊 Posture Progress Dashboard</h2>
                <button id="close-dashboard" class="close-btn">✕</button>
            </div>
            
            <div class="dashboard-body">
                <div class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-icon">📈</div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-sessions">0</div>
                            <div class="stat-label">Total Sessions</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⏱️</div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-time">0m</div>
                            <div class="stat-label">Total Time</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🎯</div>
                        <div class="stat-info">
                            <div class="stat-value" id="avg-posture">0%</div>
                            <div class="stat-label">Avg. Good Posture</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">📊</div>
                        <div class="stat-info">
                            <div class="stat-value" id="improvement">0%</div>
                            <div class="stat-label">Improvement</div>
                        </div>
                    </div>
                </div>

                <div class="progress-section">
                    <h3>7-Day Progress</h3>
                    <div class="progress-chart">
                        <canvas id="progress-canvas" width="600" height="300"></canvas>
                    </div>
                </div>

                <div class="insights-section">
                    <h3>Insights & Recommendations</h3>
                    <div id="insights-container" class="insights-container">
                        <!-- Insights will be populated by JavaScript -->
                    </div>
                </div>

                <div class="recent-sessions">
                    <h3>Recent Sessions</h3>
                    <div id="sessions-list" class="sessions-list">
                        <!-- Sessions will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="dashboard.js"></script>
    <script src="renderer.js"></script>
</body>
</html> 